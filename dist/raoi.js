var Raoi;(()=>{"use strict";var t={d:(e,i)=>{for(var r in i)t.o(i,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};(()=>{function i(t){return!("function"!=typeof t||!/^\s*class\s+/.test(t.toString()))||(console.error("Raoi error: Register type must be a class declaration"),!1)}t.d(e,{default:()=>o});class r{constructor(t=void 0){this.t=-1,this.i=void 0,this.h=void 0,this.u=new Map,void 0!==t&&i(t)&&(this.i=t)}l(t){return void 0===t||("object"!=typeof t||Array.isArray(t)||null===t?(console.error(`Raoi error: Register can only hold objects, but variable was of type '${null===t?"null":typeof t}'`),!1):void 0===this.i||t instanceof this.i||(console.error(`Raoi error: Register can only hold objects of type '${this.i.toString().substring(0,this.i.toString().indexOf(" {"))}', but object was of type '${t.constructor.name}'`),!1))}p(t){return!("number"!=typeof t||t<0||(0|t)!==t)||(console.error(`Raoi error: id '${t}' is not valid, must be integer >= 0`),!1)}v(t){return!(!Array.isArray(t)||2!==t.length||0!==t[0]&&1!==t[0]||!t[1])}R(t,e,i){return void 0!==t&&(i||!this._()?this.u.set(e,[0,t]):this.u.set(e,[1,new WeakRef(t)]),!0)}j(t=void 0,e=!1){return this.l(t)||(t=void 0),this.R(t,++this.t,e),this.t}m(t,e,i=!1){return!!this.l(t)&&!!this.p(e)&&(e>this.t&&(this.t=e),this.R(t,e,i),!0)}k(t){if(this.p(t)){let e=this.u.get(t);if(e)if(this.v(e)){let t=0===e[0]?e[1]:e[1].deref();if(this.l(t))return t}else this.u.delete(t)}}V(t){if(this.l(t)){let e=[];for(let[i,r]of this.u.entries())this.v(r)?t===(0===r[0]?r[1]:r[1].deref())&&e.push(i):this.u.delete(i);if(e.length)return e.sort((function(t,e){return t-e}))}}O(t){return!!this.p(t)&&this.u.delete(t)}_(){if(void 0===this.h){this.h=!0;try{new WeakRef(new Object)}catch(t){this.h=!1}}return this.h}$(){let t=[];for(let[e,i]of this.u.entries())this.v(i)?t.push({id:e,reference:0===i[0]?"strong":"weak",object:0===i[0]?i[1]:i[1].deref()}):this.u.delete(e);return{type:this.i,index:this.t,records:t}}A(t,e=!0){if(!i(t.type)||t.type!==this.i)return!1;if(!this.W(t))return!1;e&&t.index>this.t&&(this.t=t.index);for(let e of t.records)this.I(e)&&this.m(e.object,e.id,"strong"===e.reference);return!0}W(t){return!!(t.hasOwnProperty("index")&&this.p(t.index)&&t.hasOwnProperty("records")&&Array.isArray(t.records))}I(t){return!!(t.hasOwnProperty("id")&&this.p(t.id)&&t.hasOwnProperty("reference")&&("strong"===t.reference||"weak"===t.reference)&&t.hasOwnProperty("object")&&this.l(t.object))}}class s{get class(){return s}constructor(t=void 0){this.M=new r,this.M=new r(t)}new(t=void 0){return new s(t)}push(t=void 0,e=!1){return this.M.j(t,e)}set(t,e,i=!1){return this.M.m(t,e,i)}get(t,e=void 0){let r=this.M.k(t);if(r&&(void 0===e||i(e)&&r instanceof e))return r}find(t){return this.M.V(t)}delete(t){return this.M.O(t)}export(){return this.M.$()}import(t,e=!0){return this.M.A(t,e)}}s.global=new s;const o=s.global})(),Raoi=e.default})();